<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=11" />
    <meta name="generator" content="Doxygen 1.12.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>RIOT OS: QN9080DK base board</title>
    <link href="tabs.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <script type="text/javascript" src="clipboard.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="global.css" rel="stylesheet" type="text/css"/>
    <!-- ... other metadata & script includes ... -->
    <script
      type="text/javascript"
      src="doxygen-awesome-paragraph-link.js"
    ></script>
      <script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
    <!-- <link href="pagefind/pagefind-ui.css" rel="stylesheet"> -->
    <script src="pagefind/pagefind-ui.js"></script>
    <script>
      // Check whether the PagefindUI class is available
      if (typeof PagefindUI === "undefined") {
        console.warn("PagefindUI class is not available | Dev Build");
      } else {
        // // Remove the "searchstub" element and initialize the PagefindUI class
        // document.getElementById("#searchstub").remove();
        // Initialize the PagefindUI class with the element id "search"
        window.addEventListener("DOMContentLoaded", (event) => {
          new PagefindUI({
            element: "#pagefindsearch",
            showSubResults: true,
            showImages: false,
            resetStyles: false,
            mergeFilter: {
              "Information Source": "API Documentation",
            },
            mergeIndex: [{
              bundlePath: "https://riot.annsann.eu/pagefind",
              mergeFilter: {
                "Information Source": "Guides",
              }
          }], 
          });
        });
      }
    </script>
  </head>
  <body>
    <div>
        <div id="top">
          <!-- do not remove this div, it is closed by doxygen! -->
          <div id="titlearea">
            <table cellspacing="0" cellpadding="0">
              <tbody>
                <tr id="projectrow">
                  <td id="projectlogo">
                    <img alt="Logo" src="riot-logo.svg"  />
                  </td>
                  <td id="projectalign">
                    <div id="projectname">
                      RIOT OS
                    </div>
                    <div id="projectbrief">The friendly Operating System for the Internet of Things</div>
                  </td>
                </tr>
              </tbody>
            </table>
            <div
              id="searchbox"
              class="searchboxui"
            >
                <button
                id="enable-search-box"
                class="searchbutton"
                >
                <h3>üê∏üîé</h3>
                <h4>Search</h4>
              </button>
              <div id="pagefindsearch" class="hidden"></div>
            </div>
          </div>
        </div>
        <script>
          /* When the user clicks on the button, toggle between hiding and showing the search box content */
          document.getElementById("enable-search-box").addEventListener("click", function () {
            var searchbox = document.getElementById("pagefindsearch");
            if (searchbox.classList.contains("hidden")) {
              searchbox.classList.remove("hidden");
              /* Focus on the search input field (classname pagefind-ui__search-input) */
              searchbox.querySelector(".pagefind-ui__search-input").focus();
            } else {
              searchbox.classList.add("hidden");
            }
          });
        </script>
        <!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',true);
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__boards__qn9080dk.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#files">Files</a>  </div>
  <div class="headertitle"><div class="title">QN9080DK base board<div class="ingroups"><a class="el" href="group__boards.html">Boards</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Support for the QN9080DK base board.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Support for the QN9080DK base board. </p>
<h3><a class="anchor" id="autotoc_md1013"></a>
General Information</h3>
<div class="image">
<img src="https://lv.farnell.com/productimages/large/en_GB/2775176-40.jpg" alt="" width="80%"/>
<div class="caption">
Top View of the QN9080DK V1.2</div></div>
<p>The QN9080DK is the developer board reference from NXP for the QN908x CPUs. The developer kit comes with two boards: a larger PCB with a QFN "module" including a QN9080DHN soldered onto it, altogether referred as the "base
board"; and separately a much smaller USB dongle with another QN9080 cpu. This board module supports the "base board" only, including the definitions of the gpio, buttons and LEDs specific to this board.</p>
<p>This board packs a few peripherals and many GPIOs:</p>
<p>MMA8652FC, a 12-bit accelerometer</p>
<p>The board also features a dedicated programmer hardware implemented using NXP's LPC4322, with its dedicated USB port for connecting to a computer on one end and the SWD port and one UART RX/TX pair connected to the QN9080 on the other end. The LPC4322 also has a fast (50 ksps) ADC ADC122S021 connected to a current sense amplifier to monitor the QN9080 current profile directly on the board.</p>
<p>For more information visit NXP's product description page for the <a href="https://www.nxp.com/QN9080DK">QN9080-DK</a> where you can find the User's Guide.</p>
<h3><a class="anchor" id="autotoc_md1014"></a>
Pinout</h3>
<h4><a class="anchor" id="autotoc_md1015"></a>
Buttons:</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Label   </th><th class="markdownTableHeadLeft">RIOT OS macro   </th><th class="markdownTableHeadLeft">MCU PIN   </th><th class="markdownTableHeadLeft">Function    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SW1   </td><td class="markdownTableBodyLeft">BTN1_PIN   </td><td class="markdownTableBodyLeft">PA24   </td><td class="markdownTableBodyLeft">User defined    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">SW2   </td><td class="markdownTableBodyLeft">BTN2_PIN   </td><td class="markdownTableBodyLeft">PA19   </td><td class="markdownTableBodyLeft">User defined    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SW3   </td><td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft">nRESET   </td><td class="markdownTableBodyLeft">QN9080 reset   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1016"></a>
One RGB led, controlled by three GPIOs</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Label   </th><th class="markdownTableHeadLeft">RIOT OS macro   </th><th class="markdownTableHeadLeft">MCU PIN    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">red   </td><td class="markdownTableBodyLeft">LED_RED_PIN   </td><td class="markdownTableBodyLeft">PA31    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">green   </td><td class="markdownTableBodyLeft">LED_GREEN_PIN   </td><td class="markdownTableBodyLeft">PA25    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">blue   </td><td class="markdownTableBodyLeft">LED_BLUE_PIN   </td><td class="markdownTableBodyLeft">PA13   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1017"></a>
SPI Flash</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Name   </th><th class="markdownTableHeadLeft">MCU Pin    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">MISO   </td><td class="markdownTableBodyLeft">PA05    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">MOSI   </td><td class="markdownTableBodyLeft">PA04    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SSEL   </td><td class="markdownTableBodyLeft">PA03    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">SCK   </td><td class="markdownTableBodyLeft">PA30   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1018"></a>
USB</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Name   </th><th class="markdownTableHeadLeft">MCU Pin    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">D+   </td><td class="markdownTableBodyLeft">PA26    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">D-   </td><td class="markdownTableBodyLeft">PA27   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1019"></a>
I2C / MMA8652FC G-Sensor</h4>
<dl class="section note"><dt>Note</dt><dd>The jumper JP11 needs to be in place to connect the I2C sensor to the pins. This is the default when freshly unboxed.</dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Name   </th><th class="markdownTableHeadLeft">MCU Pin    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SCL   </td><td class="markdownTableBodyLeft">PA06    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">SDA   </td><td class="markdownTableBodyLeft">PA07   </td></tr>
</table>
<p>The MMA8652 sensor has I2C address 0x1d.</p>
<h3><a class="anchor" id="autotoc_md1020"></a>
Flashing the Board</h3>
<p>The integrated programmer by default comes with an "LPC-LINK2" firmware that provides a CMSIS DAP compatible interface. The programmer can be flashed with a Segger J-Link firmware via DFU, see the <a href="https://web.archive.org/web/20220225151231/https://www.nxp.com/docs/en/user-guide/LPCScrypt_User_Guide.pdf">LPCSCrypt User Guide</a> for details. It seems that the "LPC-LINK2" firmware the board is shipped with is unreliable. Updating that as also described in the <a href="https://web.archive.org/web/20220225151231/https://www.nxp.com/docs/en/user-guide/LPCScrypt_User_Guide.pdf">LPCSCrypt User Guide</a> or switching to the J-Link firmware is recommended.</p>
<dl class="section warning"><dt>Warning</dt><dd>The update software is quite flaky. Do not connect other USB device providing a serial (e.g. CDC ACM) to not confuse it. You may need to adapt the shell script to grep for the correct vid/pid pair using hex values prefixed with <code>0x</code> when using a <code>dfu-util</code> in a more recent version than the script expects.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The Windows version of the software is at least equally frustrating. So you may was well use the Linux variant and fix the shell script as needed rather than spinning up a Windows VM in the hope to safe pain in the ass.</dd></dl>
<h4><a class="anchor" id="autotoc_md1021"></a>
Using the Internal Programmer with Default Firmware</h4>
<p>In the application directory, run:</p>
<div class="fragment"><div class="line">make BOARD=qn9080dk flash</div>
</div><!-- fragment --><p>OpenOCD support for the QN908x flash is as of June 2023 not yet part of any release, but has been merged upstream. It is expected to be included first in the 0.13 release of OpenOCD. Until then, compiling a version from the current git source is the needed.</p>
<h4><a class="anchor" id="autotoc_md1022"></a>
Using the Internal Programmer with J-Link Firmware</h4>
<p>In the application directory, run:</p>
<div class="fragment"><div class="line">make BOARD=qn9080dk QN9080DK_JLINK=1 flash</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Instead of passing <code>QN9080DK_JLINK=1</code> every time, it can also be exported as environment variable.</dd></dl>
<h4><a class="anchor" id="autotoc_md1023"></a>
Using an External Programmer</h4>
<p>By setting the jumper at <code>JP2</code> to <code>EXT</code> the internal LPC4322 debugger/programmer is disconnect and an external programmer can be connected at header <code>P1</code> using a standard 10 pin 1.27 mm debug connector. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qn9080dk_2include_2board_8h.html">board.h</a></td></tr>
<tr class="memdesc:qn9080dk_2include_2board_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Board specific definitions for the QN9080DK base board. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qn9080dk_2include_2gpio__params_8h.html">gpio_params.h</a></td></tr>
<tr class="memdesc:qn9080dk_2include_2gpio__params_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Board specific configuration of direct mapped GPIOs. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="boards_2qn9080dk_2include_2periph__conf_8h.html">periph_conf.h</a></td></tr>
<tr class="memdesc:boards_2qn9080dk_2include_2periph__conf_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configuration of CPU peripherals for QN9080DK base board board. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.12.0-->
<!-- start footer part -->
<div>
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Oct 8 2024 11:10:19 for RIOT OS by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</div>
</body>
</html>
