<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=11" />
    <meta name="generator" content="Doxygen 1.12.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>RIOT OS: Simple-Subnet auto-configuration</title>
    <link href="tabs.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <script type="text/javascript" src="clipboard.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="global.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-paragraph-link.js" rel="stylesheet" type="text/css"/>
    <!-- ... other metadata & script includes ... -->
    <script
      type="text/javascript"
      src="doxygen-awesome-paragraph-link.js"
    ></script>
    <script type="text/javascript">
      DoxygenAwesomeParagraphLink.init();
    </script>
    <!-- <link href="pagefind/pagefind-ui.css" rel="stylesheet"> -->
    <script src="pagefind/pagefind-ui.js"></script>
    <script>
      // Check whether the PagefindUI class is available
      if (typeof PagefindUI === "undefined") {
        console.error("PagefindUI class is not available | Dev Build");
      } else {
        // // Remove the "searchstub" element and initialize the PagefindUI class
        // document.getElementById("#searchstub").remove();
        // Initialize the PagefindUI class with the element id "search"
        window.addEventListener("DOMContentLoaded", (event) => {
          new PagefindUI({
            element: "#pagefindsearch",
            showSubResults: true,
            showImages: false,
            resetStyles: false,
          });
        });
      }
    </script>
  </head>
  <body>
    <div>
        <div id="top">
          <!-- do not remove this div, it is closed by doxygen! -->
          <div id="titlearea">
            <table cellspacing="0" cellpadding="0">
              <tbody>
                <tr id="projectrow">
                  <td id="projectlogo">
                    <img alt="Logo" src="riot-logo.svg"  />
                  </td>
                  <td id="projectalign">
                    <div id="projectname">
                      RIOT OS
                    </div>
                    <div id="projectbrief">The friendly Operating System for the Internet of Things</div>
                  </td>
                </tr>
              </tbody>
            </table>
            <div
              id="searchbox"
              class="flex justify-items-center mb-6 gap-2 flex-col transition ease-in-out absolute z-[1055] bg-slate-800 right-6 top-16 rounded-xl min-h-32 m-4 p-4 max-h-screen min-w-64 max-w-96 overflow-y-auto overflow-x-hidden outline-double outline-4 outline-slate-700"
            >
              <div class="self-center text-xl">Searchbox üê∏üîé</div>
              <div id="pagefindsearch"></div>
            </div>
          </div>
        </div>
        <!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',true);
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__net__gnrc__ipv6__auto__subnets.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle"><div class="title">Simple-Subnet auto-configuration<div class="ingroups"><a class="el" href="group__net.html">Networking</a> &raquo; <a class="el" href="group__net__gnrc.html">Generic (GNRC) network stack</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Automatic configuration for cascading subnets  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Automatic configuration for cascading subnets </p>
<h1><a class="anchor" id="autotoc_md2180"></a>
About</h1>
<p>This module provides an automatic configuration for networks with a (simple) tree topology.</p>
<p>If a sufficiently large IPv6 subnet (prefix length &lt; /64) is provided via Router Advertisements, a routing node with this module will automatically configure subnets from it by dividing it into sub-prefixes for each downstream interface.</p>
<p>When using the <code>gnrc_ipv6_auto_subnets_simple</code> module, there can only be a single routing node on each level of the network but an arbitrary number of leaf nodes and downstream interfaces.</p>
<p><img src="gnrc_ipv6_auto_subnets_simple.svg" alt="Example Topology with only one router on each level" style="pointer-events: none;" class="inline"/></p>
<p>If there are multiple routing nodes on the same link, coordination between the routers is required. For this the <code>gnrc_ipv6_auto_subnets</code> implements a simple UDP based synchronisation protocol where each router announces the number of subnets they want to create.</p>
<p><img src="gnrc_ipv6_auto_subnets-flow.svg" alt="Synchronisation Algorithm" style="pointer-events: none;" class="inline"/></p>
<p>The layer 2 address of the sender then determines the order in which the prefixes are assigned.</p>
<p><img src="gnrc_ipv6_auto_subnets.svg" alt="Example Topology with multiple routers" style="pointer-events: none;" class="inline"/></p>
<p>The downstream network(s) receive the sub-prefix via Router Advertisements and the process repeats until the bits of the prefix are exhausted. The smallest subnet must still have a /64 prefix.</p>
<p>The new subnet must no longer be considered on-link by the hosts in the parent network. Therefore the downstream router will send a router advertisement, which only contains a Route Information Option, to the upstream network. The Route Information Option contains the prefix of the downstream network so that upstream routers will no longer consider hosts in this subnet on-link, but instead will use the downstream router to route to the new subnet.</p>
<h2><a class="anchor" id="autotoc_md2181"></a>
The need for a Route Information Option</h2>
<p>All nodes that want to communicate with hosts in a downstream subnet must implement parsing of the Route Information Option. For routing RIOT nodes this is enabled by default, non-routing nodes need to enable the <code>gnrc_ipv6_nib_rio</code> module.</p>
<p>This is because all addresses in the subnet are also within the original network, so without further information hosts would consider those addresses on-link and perform neighbor solicitation to communicate with them.</p>
<p>E.g. if host ‚í∏ (<code>2001:db8:0:8:5075:35ff:fefa:30bc</code>) sends an ICMPv6 Echo request to ‚í∑ (<code>2001:db8:0:0:a7a2:12e0:48bc:7487</code>), it would not get a response:</p>
<p><img src="gnrc_ipv6_auto_subnets-without_rio.svg" alt="Auto-Subnets without RIO" style="pointer-events: none;" class="inline"/></p>
<p>To solve this, the routing node ‚í∂ also sends a Router Advertisement to the <em>upstream</em> network that only contains a Route Information Option for each downstream network created by that router. This way hosts in the upstream network will prefer the route via ‚í∂ over link-local transmission as it is a stronger match than the upstream prefix:</p>
<p><img src="gnrc_ipv6_auto_subnets-with_rio.svg" alt="Auto-Subnets with RIO" style="pointer-events: none;" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md2182"></a>
Usage</h1>
<p>Simply add the <code>gnrc_ipv6_auto_subnets</code> or <code>gnrc_ipv6_auto_subnets_simple</code> module to the nodes that should act as routers in the cascading network. The upstream network will be automatically chosen as the one that first receives a router advertisement. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gnrc__ipv6__auto__subnets_8c.html">gnrc_ipv6_auto_subnets.c</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gaa8ea59ee970849a2f43aa2641e43a5fc" id="r_gaa8ea59ee970849a2f43aa2641e43a5fc"><td class="memItemLeft" align="right" valign="top"><a id="gaa8ea59ee970849a2f43aa2641e43a5fc" name="gaa8ea59ee970849a2f43aa2641e43a5fc"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CONFIG_GNRC_IPV6_AUTO_SUBNETS_PORT</b>&#160;&#160;&#160;(16179)</td></tr>
<tr class="memdesc:gaa8ea59ee970849a2f43aa2641e43a5fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Port for the custom UDP sync protocol. <br /></td></tr>
<tr class="separator:gaa8ea59ee970849a2f43aa2641e43a5fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga16739eb64df82cd8d68247918fd840a0" id="r_ga16739eb64df82cd8d68247918fd840a0"><td class="memItemLeft" align="right" valign="top"><a id="ga16739eb64df82cd8d68247918fd840a0" name="ga16739eb64df82cd8d68247918fd840a0"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CONFIG_GNRC_IPV6_AUTO_SUBNETS_PEERS_MAX</b>&#160;&#160;&#160;(4)</td></tr>
<tr class="memdesc:ga16739eb64df82cd8d68247918fd840a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Max number of other routers on the same link. <br /></td></tr>
<tr class="separator:ga16739eb64df82cd8d68247918fd840a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaac9d004b28ee82d74fdfa217d1ef2b4f" id="r_gaac9d004b28ee82d74fdfa217d1ef2b4f"><td class="memItemLeft" align="right" valign="top"><a id="gaac9d004b28ee82d74fdfa217d1ef2b4f" name="gaac9d004b28ee82d74fdfa217d1ef2b4f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CONFIG_GNRC_IPV6_AUTO_SUBNETS_TX_PER_PERIOD</b>&#160;&#160;&#160;(3)</td></tr>
<tr class="memdesc:gaac9d004b28ee82d74fdfa217d1ef2b4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">How often the number subnets should be announced by the routers. <br /></td></tr>
<tr class="separator:gaac9d004b28ee82d74fdfa217d1ef2b4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4db5ec851d70adcc31380697140992d1" id="r_ga4db5ec851d70adcc31380697140992d1"><td class="memItemLeft" align="right" valign="top"><a id="ga4db5ec851d70adcc31380697140992d1" name="ga4db5ec851d70adcc31380697140992d1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CONFIG_GNRC_IPV6_AUTO_SUBNETS_TIMEOUT_MS</b>&#160;&#160;&#160;(50)</td></tr>
<tr class="memdesc:ga4db5ec851d70adcc31380697140992d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">How long to wait for other routers announcements before resending or creating subnets when the retry counter is exhausted. <br /></td></tr>
<tr class="separator:ga4db5ec851d70adcc31380697140992d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac81841ddded26404c1d0384defb23344" id="r_gac81841ddded26404c1d0384defb23344"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac81841ddded26404c1d0384defb23344">CONFIG_GNRC_IPV6_AUTO_SUBNETS_PREFIX_FIX_LEN</a>&#160;&#160;&#160;(0)</td></tr>
<tr class="memdesc:gac81841ddded26404c1d0384defb23344"><td class="mdescLeft">&#160;</td><td class="mdescRight">How many bits of a new prefix have to match the old prefix for it to be considered for replacement.  <br /></td></tr>
<tr class="separator:gac81841ddded26404c1d0384defb23344"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabbfce1e27dcefc82c00ec2e58b273053" id="r_gabbfce1e27dcefc82c00ec2e58b273053"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gabbfce1e27dcefc82c00ec2e58b273053">CONFIG_GNRC_IPV6_AUTO_SUBNETS_PREFIX_MIN_LEN</a>&#160;&#160;&#160;(0)</td></tr>
<tr class="memdesc:gabbfce1e27dcefc82c00ec2e58b273053"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimal length of a new prefix.  <br /></td></tr>
<tr class="separator:gabbfce1e27dcefc82c00ec2e58b273053"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafd478bbf55a33dcc983855d627bd4672" id="r_gafd478bbf55a33dcc983855d627bd4672"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gafd478bbf55a33dcc983855d627bd4672">CONFIG_GNRC_IPV6_AUTO_SUBNETS_NUMOF</a>&#160;&#160;&#160;(1)</td></tr>
<tr class="memdesc:gafd478bbf55a33dcc983855d627bd4672"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of subnets that can be configured.  <br /></td></tr>
<tr class="separator:gafd478bbf55a33dcc983855d627bd4672"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa6b08413af78bbe0d526da26ed9e3fc5" id="r_gaa6b08413af78bbe0d526da26ed9e3fc5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa6b08413af78bbe0d526da26ed9e3fc5">CONFIG_GNRC_IPV6_AUTO_SUBNETS_STATIC</a>&#160;&#160;&#160;(0)</td></tr>
<tr class="memdesc:gaa6b08413af78bbe0d526da26ed9e3fc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable this if you have a static network that might experience high packet loss under certain conditions.  <br /></td></tr>
<tr class="separator:gaa6b08413af78bbe0d526da26ed9e3fc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gafd478bbf55a33dcc983855d627bd4672" name="gafd478bbf55a33dcc983855d627bd4672"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafd478bbf55a33dcc983855d627bd4672">&#9670;&#160;</a></span>CONFIG_GNRC_IPV6_AUTO_SUBNETS_NUMOF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_GNRC_IPV6_AUTO_SUBNETS_NUMOF&#160;&#160;&#160;(1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of subnets that can be configured. </p>
<pre class="fragment">   This is not needed when using the `gnrc_ipv6_auto_subnets_simple` module
   or if only a single upstream subnet is to be partitioned.

   If this is set to any number higher than 1, make sure to also configure
   CONFIG_GNRC_IPV6_AUTO_SUBNETS_PREFIX_FIX_LEN to suit your setup.
</pre> 
</div>
</div>
<a id="gac81841ddded26404c1d0384defb23344" name="gac81841ddded26404c1d0384defb23344"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac81841ddded26404c1d0384defb23344">&#9670;&#160;</a></span>CONFIG_GNRC_IPV6_AUTO_SUBNETS_PREFIX_FIX_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_GNRC_IPV6_AUTO_SUBNETS_PREFIX_FIX_LEN&#160;&#160;&#160;(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>How many bits of a new prefix have to match the old prefix for it to be considered for replacement. </p>
<p>Set this if you want to join multiple upstream subnets at the same time.</p>
<p>If you use <code>gnrc_ipv6_auto_subnets</code> instead of <code>gnrc_ipv6_auto_subnets_simple</code> make sure to also set CONFIG_GNRC_IPV6_AUTO_SUBNETS_NUMOF accordingly. </p>

</div>
</div>
<a id="gabbfce1e27dcefc82c00ec2e58b273053" name="gabbfce1e27dcefc82c00ec2e58b273053"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabbfce1e27dcefc82c00ec2e58b273053">&#9670;&#160;</a></span>CONFIG_GNRC_IPV6_AUTO_SUBNETS_PREFIX_MIN_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_GNRC_IPV6_AUTO_SUBNETS_PREFIX_MIN_LEN&#160;&#160;&#160;(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Minimal length of a new prefix. </p>
<p>e.g. Linux will only accept /64 prefixes for SLAAC </p>

</div>
</div>
<a id="gaa6b08413af78bbe0d526da26ed9e3fc5" name="gaa6b08413af78bbe0d526da26ed9e3fc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa6b08413af78bbe0d526da26ed9e3fc5">&#9670;&#160;</a></span>CONFIG_GNRC_IPV6_AUTO_SUBNETS_STATIC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_GNRC_IPV6_AUTO_SUBNETS_STATIC&#160;&#160;&#160;(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable this if you have a static network that might experience high packet loss under certain conditions. </p>
<p>If enabled, this option causes the module to always assume the highest number of downstream routers it has ever seen. This prevents different/conflicting downstream subnets from being configured if multiple sync packets got lost. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.12.0-->
<!-- start footer part -->
<div>
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Oct 1 2024 14:02:39 for RIOT OS by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</div>
</body>
</html>
